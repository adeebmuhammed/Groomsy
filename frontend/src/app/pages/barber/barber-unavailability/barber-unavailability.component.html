<div class="barber-layout">
  <app-barber-sidebar class="barber-sidebar"></app-barber-sidebar>
  <div class="barber-main-content">
    <app-barber-header></app-barber-header>

    <div class="barber-dashboard-page">
      <div class="overlay">
        <div class="dashboard-content">
          <div class="admin-sign-in">Barber Unavailability</div>

          <!-- Weekly Off -->
          <div class="form-section">
            <label for="weeklyOff">Weekly Off:</label>
            <div class="d-flex flex-wrap align-items-center gap-2 mt-2">
              <select
                class="form-select custom-input w-auto"
                [(ngModel)]="newWeeklyOff"
              >
                <option *ngFor="let day of validDays" [value]="day">
                  {{ day }}
                </option>
              </select>
              <button class="submit-button" (click)="updateWeeklyOff()">
                Update
              </button>
            </div>
          </div>

          <!-- Add Special Off -->
          <div class="form-section mt-4">
            <label>Add Special Off:</label>
            <div class="row g-2 mt-2">
              <div class="col-md-3">
                <input
                  type="date"
                  class="form-control custom-input"
                  [(ngModel)]="newOffDate"
                />
              </div>
              <div class="col-md-6">
                <input
                  type="text"
                  class="form-control custom-input"
                  placeholder="Reason"
                  [(ngModel)]="newOffReason"
                />
              </div>
              <div class="col-md-3 d-grid">
                <button
                  class="submit-button add-slot-btn"
                  (click)="addSpecialOff()"
                >
                  Add
                </button>
              </div>
            </div>
          </div>

          <!-- Special Off Table -->
          <div class="table-wrapper mt-5">
            <table class="table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Reason</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let off of unavailabilityData?.specialOffDays">
                  <td>{{ off.date }}</td>
                  <td>{{ off.reason || "-" }}</td>
                  <td>
                    <button
                      class="submit-button btn-danger"
                      (click)="removeSpecialOff(off.date)"
                    >
                      Remove
                    </button>
                  </td>
                </tr>
                <tr *ngIf="!unavailabilityData?.specialOffDays?.length">
                  <td colspan="3" class="text-center">
                    No special off days found.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Error Message -->
          <div *ngIf="error" class="alert alert-danger mt-3">
            {{ error }}
          </div>
        </div>
      </div>
    </div>
    <app-barber-footer></app-barber-footer>
  </div>
  
</div>
