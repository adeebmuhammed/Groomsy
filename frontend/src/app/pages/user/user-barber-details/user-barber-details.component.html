<app-user-header></app-user-header>

<div class="barber-details-container">
  <div class="barber-info">
    <h2>{{ barber?.name }}</h2>
    <p>Contact: {{ barber?.email }}</p>
    <p>District: {{ barber?.district }}</p>
    <p>
      Status:
      <span
        [ngClass]="
          barber?.status === 'active' ? 'active-status' : 'blocked-status'
        "
      >
        {{ barber?.status }}
      </span>
    </p>
  </div>

  <div class="services-section">
    <h2>Choose a Service</h2>
    <div class="services-grid">
      <app-service-card
        *ngFor="let service of services"
        [title]="service.name"
        [duration]="service.duration"
        [price]="service.price"
        [description]="service.description"
        (click)="selectService(service)"
      >
      </app-service-card>
    </div>
  </div>

  <!-- Booking Modal -->
  <div
    class="modal fade"
    id="bookingModal"
    tabindex="-1"
    aria-labelledby="bookingModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header bg-light">
          <h5 class="modal-title fw-semibold" id="bookingModalLabel">
            Choose a Date
          </h5>
        </div>

        <!-- Modal Body -->
        <div class="modal-body">
          <div class="mb-3">
            <label for="dateInput" class="form-label fw-medium"
              >Select Date</label
            >
            <input
              type="date"
              class="form-control"
              [(ngModel)]="selectedDate"
              id="dateInput"
              min="{{ todayDate }}"
            />
          </div>
          <div *ngIf="barberUnavailability" class="alert alert-warning">
            <strong>Weekly Off:</strong> {{ barberUnavailability.weeklyOff }}
            <br />
            <strong>Special Off Days:</strong>
            <span *ngIf="barberUnavailability.specialOffDays.length; else none">
              <span *ngFor="let off of barberUnavailability.specialOffDays">
                {{ off.date }} <span *ngIf="off.reason">({{ off.reason }})</span
                ><br />
              </span>
            </span>
            <ng-template #none>None</ng-template>
          </div>
        </div>

        <!-- Modal Footer -->
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-outline-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="button" class="btn btn-primary" (click)="submitDate()">
            Show Slots
          </button>
        </div>
      </div>
    </div>
  </div>

  <app-slot-table-modal
    [slots]="populatedSlots"
    [date]="fetchedDate"
    (onBookSlot)="bookTimeSlot($event.slot, $event.date)"
  ></app-slot-table-modal>
</div>

<app-user-footer></app-user-footer>
