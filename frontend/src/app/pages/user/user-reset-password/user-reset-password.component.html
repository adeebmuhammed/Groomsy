<app-user-header></app-user-header>

<form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="main-content">
  <div class="admin-sign-in">Reset Password</div>

  <div class="form-container">
    <!-- Password Field -->
    <div class="field-group">
      <div class="password-field">
        <input type="password" formControlName="password" placeholder="Password" class="password" />
      </div>
      @if (resetPasswordForm.get('password')?.touched || resetPasswordForm.get('password')?.dirty) {
        @if (resetPasswordForm.get('password')?.errors?.['required']) {
          <div class="error">Password is required.</div>
        }
        @if (resetPasswordForm.get('password')?.errors?.['minlength']) {
          <div class="error">Minimum 8 characters required.</div>
        }
        @if (resetPasswordForm.get('password')?.errors?.['pattern']) {
          <div class="error">
            Must include uppercase, lowercase, number & special character.
          </div>
        }
      }
    </div>

    <!-- Confirm Password Field -->
    <div class="field-group">
      <div class="password-field">
        <input type="password" formControlName="confirmPassword" placeholder="Confirm Password" class="password" />
      </div>
      @if (resetPasswordForm.get('confirmPassword')?.touched || resetPasswordForm.get('confirmPassword')?.dirty) {
        @if (resetPasswordForm.get('confirmPassword')?.errors?.['required']) {
          <div class="error">Confirm Password is required.</div>
        }
        @if (resetPasswordForm.errors?.['passwordMismatch']) {
          <div class="error">Passwords do not match.</div>
        }
      }
    </div>

    <!-- Submit Button -->
    <div class="submit-button">
      <button type="submit" class="sign-in-text" [disabled]="resetPasswordForm.invalid">
        Reset Password
      </button>
      @if (successMessage) {
        <div class="success">{{ successMessage }}</div>
      }
      @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
      }
    </div>
  </div>

  <!-- Back to Login Link -->
  <div class="login-link">
    Back to <a routerLink="/user/signin">Login</a>
  </div>
</form>

<app-user-footer></app-user-footer>
