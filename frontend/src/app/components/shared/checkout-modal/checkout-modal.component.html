<div
  class="modal fade"
  id="bookingCheckoutModal"
  tabindex="-1"
  aria-labelledby="bookingCheckoutModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content checkout-modal">

      <!-- Header -->
      <div class="modal-header border-0 pb-0">
        <div class="d-flex align-items-center">
          <i class="bi bi-receipt-cutoff text-primary fs-3 me-2"></i>
          <h5 class="modal-title fw-bold">Confirm Your Booking</h5>
        </div>

        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
          (click)="cancelBooking()"
        ></button>
      </div>

      <!-- Body -->
      <div class="modal-body">

        <div class="info-box mb-3">
          <h6 class="section-title">Service Details</h6>
          <p *ngIf="barber"><strong>Barber:</strong> {{ barber.name }}</p>
          <p *ngIf="service">
            <strong>Service:</strong> {{ service.name }} ({{ service.duration }} mins)
          </p>
          <p><strong>Start Time:</strong> {{ startTime | date : "shortTime" }}</p>
          <p><strong>End Time:</strong> {{ endTime | date : "shortTime" }}</p>
        </div>

        <div class="price-box p-3 rounded mb-3">
          <h6 class="section-title">Billing Summary</h6>

          <div class="d-flex justify-content-between mb-1">
            <span>Total Price</span>
            <span class="fw-semibold">₹{{ booking?.totalPrice }}</span>
          </div>

          <div
            *ngIf="booking?.discountAmount"
            class="d-flex justify-content-between text-success mb-1"
          >
            <span>Discount</span>
            <span>-₹{{ booking?.discountAmount }}</span>
          </div>

          <div *ngIf="booking?.couponCode" class="mb-2">
            <span class="badge bg-light text-dark">
              Coupon Applied: {{ booking?.couponCode }}
            </span>
          </div>

          @if (booking?.finalPrice) {
          <div class="d-flex justify-content-between mt-2 final-price">
            <strong>Final Price</strong>
            <strong>₹{{ booking?.finalPrice }}</strong>
          </div>
          }
        </div>

        <!-- Coupon Section -->
        <div class="coupon-section mt-3">
          <label class="form-label fw-semibold">Apply Coupon</label>
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="couponCode"
              placeholder="Enter coupon code"
            />
            <button
              class="btn btn-outline-primary"
              (click)="couponApplication()"
              type="button"
            >
              Apply
            </button>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn btn-outline-secondary px-4"
          (click)="cancelBooking()"
        >
          Cancel
        </button>
        <button
          type="button"
          class="btn btn-primary px-4"
          (click)="confirmBooking()"
        >
          Proceed to Payment
        </button>
      </div>
    </div>
  </div>
</div>
